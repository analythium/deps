<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Dependency management with code decoration.
">
<title>deps: Dependency Management with Code Decoration • deps</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="deps: Dependency Management with Code Decoration">
<meta property="og:description" content="Dependency management with code decoration.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script src="https://cdn.usefathom.com/script.js" data-site="XXTESXHY" defer></script><link rel="icon" href="https://hub.analythium.io/assets/logo/grays/favicon.ico">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">deps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/analythium" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://github.com/analythium" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="deps">deps<a class="anchor" aria-label="anchor" href="#deps"></a>
</h1></div>
<blockquote>
<p>Dependency Management with roxygen-style Comments</p>
</blockquote>
<p>Manage your source code dependencies by decorating your existing R code with special, roxygen-style comments.</p>
<p><a href="https://github.com/analythium/deps/actions" class="external-link"><img src="https://github.com/analythium/deps/actions/workflows/check.yml/badge.svg" alt="Build status"></a></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @remote analythium/deps</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"analythium/deps"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="why-this-package">Why this package?<a class="anchor" aria-label="anchor" href="#why-this-package"></a>
</h2>
<p>There are many similar packages out there, some aimed at reproducibility (<a href="https://CRAN.R-project.org/package=packrat" class="external-link">packrat</a>, <a href="https://CRAN.R-project.org/package=Require" class="external-link">Require</a>, <a href="https://cran.r-project.org/package=switchr" class="external-link">switchr</a>, <a href="https://CRAN.R-project.org/package=versions" class="external-link">versions</a>, <a href="https://CRAN.R-project.org/package=renv" class="external-link">renv</a>), <a href="https://github.com/MilesMcBain/capsule" class="external-link">capsule</a>. Others are focused on dependency management (<a href="https://CRAN.R-project.org/package=remotes" class="external-link">remotes</a>, <a href="https://CRAN.R-project.org/package=pak" class="external-link">pak</a>).</p>
<p><strong>So why do we need another one?</strong></p>
<p>Full reproducibility is an important and heavyweight aspiration that either needs locally cached package libraries, or an accurate snapshot mirroring the local system (i.e. exactly where the package was installed from). Full reproducibility is often required for reports, markdown based documents, scripts. <em>A loosely defined project that is combined with strict versioning requirements, often erring on the side of “more dependencies are safer”.</em></p>
<p>As opposed to this, package-based development is the main use case for dependency management oriented packages. In this case, exact versions are only managed to the extent of avoiding breaking changes (given that testing can surface these). <em>A package focused workflow combined with a “no breaking changes” philosophy to version requirements, leading to leaner installation.</em></p>
<p>What if you wanted to combine the best of both approaches? <em>A loosely defined project with just strict-enough versioning requirements</em> – and all this without having to write a <code>DESCRIPTION</code> file. Because why would you need a <code>DESCRIPTION</code> file when you have no package? Also, a <code>DESCRIPTION</code> file won’t let you to pin an exact the package version or to specify alternate CRAN-like repositories…</p>
<p>The answer is deps: <strong>you add comments to your code, deps does the rest</strong>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @remote analythium/rconfig@CRAN-v0.1.3</span></span>
<span><span class="fu">rconfig</span><span class="fu">::</span><span class="fu">config</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @repo sf https://r-spatial.r-universe.dev</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">#' @ver rgl 0.108.3</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmurdoch/rgl" class="external-link">rgl</a></span><span class="op">)</span></span></code></pre></div>
<p>Once you decorated your code, you can call <code><a href="reference/create.html">deps::create()</a></code> to write your <code>dependencies.json</code> file.</p>
<p>Use <code><a href="reference/install.html">deps::install()</a></code> to install dependencies based on scanning a project folder or using and existing <code>dependencies.json</code> file.</p>
</div>
<div class="section level2">
<h2 id="what-deps-does">What deps does<a class="anchor" aria-label="anchor" href="#what-deps-does"></a>
</h2>
<p>Required packages are found using the <a href="https://rstudio.github.io/renv/reference/dependencies.html" class="external-link"><code>renv::dependencies()</code></a> function. System dependencies are based on <a href="https://sysreqs.r-hub.io" class="external-link">sysreqs.r-hub.io</a>.</p>
<p>The packages list found by <code><a href="https://rstudio.github.io/renv/reference/dependencies.html" class="external-link">renv::dependencies()</a></code> is refined and modified by roxygen-style comments. But the packages need to be declared/used somewhere in the source code for the comments to take effect.</p>
<p>If no comment is provided for a given package, its source is assumed to be a CRAN repository, and its version to be the latest given the repositories used at the time of installation.</p>
</div>
<div class="section level2">
<h2 id="tags">Tags<a class="anchor" aria-label="anchor" href="#tags"></a>
</h2>
<p>Tags are part of the <a href="https://cran.r-project.org/package=roxygen2" class="external-link">roxygen-style comments</a>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @&lt;tag&gt; &lt;parameter&gt;</span></span></code></pre></div>
<p>where <code>#'</code> is followed by space, the tag starting with <code>@</code>, space, and some parameters.</p>
<p>deps implements the following tags:</p>
<table class="table">
<thead><tr class="header">
<th>Tag</th>
<th>Description</th>
<th>Usage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>@sys</code></td>
<td>System requirement(s)</td>
<td><code>@sys req1,req2,...</code></td>
</tr>
<tr class="even">
<td><code>@remote</code></td>
<td>Remote source(s)</td>
<td><code>@remote remote1,remote2,...</code></td>
</tr>
<tr class="odd">
<td><code>@local</code></td>
<td>Local source(s)</td>
<td><code>@local path1,path2,...</code></td>
</tr>
<tr class="even">
<td><code>@ver</code></td>
<td>Versioned package</td>
<td><code>@ver pkg version</code></td>
</tr>
<tr class="odd">
<td><code>@dev</code></td>
<td>Development package(s)</td>
<td><code>@dev pkg1,pkg2,...</code></td>
</tr>
<tr class="even">
<td><code>@repo</code></td>
<td>CRAN-like source</td>
<td><code>@repo pkg repo</code></td>
</tr>
<tr class="odd">
<td><code>@repos</code></td>
<td>Global CRAN-like repo(s)</td>
<td><code>@repos repo1,repo2,...</code></td>
</tr>
<tr class="even">
<td><code>@rver</code></td>
<td>R version</td>
<td><code>@rver 4.1.3</code></td>
</tr>
</tbody>
</table>
<div class="section level4">
<h4 id="system-requirements">System requirements<a class="anchor" aria-label="anchor" href="#system-requirements"></a>
</h4>
<p>Known system requirements can be declared using the <code>@sys</code> tag, packages can be separated by commas:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @sys curl,git</span></span></code></pre></div>
<p>These packages are added to the list of requirements identified by the <a href="https://sysreqs.r-hub.io" class="external-link">sysreqs.r-hub.io</a> database for the non-development packages.</p>
</div>
<div class="section level4">
<h4 id="remote-sources">Remote sources<a class="anchor" aria-label="anchor" href="#remote-sources"></a>
</h4>
<p>Remotely sourced packages are declared using the <code>@remote</code>tag following the <a href="https://CRAN.R-project.org/package=remotes/vignettes/dependencies.html" class="external-link"><code>remotes</code></a> specifications:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @remote analythium/rconfig@CRAN-v0.1.3</span></span>
<span><span class="fu">rconfig</span><span class="fu">::</span><span class="fu">config</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This is effectively a version pinning for remotely sourced packages.</p>
</div>
<div class="section level4">
<h4 id="local-packages">Local packages<a class="anchor" aria-label="anchor" href="#local-packages"></a>
</h4>
<p>The <code>@local</code> tag can be used to provide a path to local directory, or compressed file (tar, zip, tar.gz, tar.bz2, tgz2, or tbz) to install packages from:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @local mypackage_0.1.0.tar.gz</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mypackage</span><span class="op">)</span></span></code></pre></div>
<p>This is effectively the same as:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @remote local::mypackage_0.1.0.tar.gz</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mypackage</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="development-packages">Development packages<a class="anchor" aria-label="anchor" href="#development-packages"></a>
</h4>
<p>Dev packages following the <code>@dev</code> decorator are excluded from installation, but are not removed if already installed:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @dev devtools,roxygen2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="alternative-repos">Alternative repos<a class="anchor" aria-label="anchor" href="#alternative-repos"></a>
</h4>
<p>Use the <code>@repo</code> tag to specify an alternative CRAN-like repository, e.g. from the <a href="https://r-universe.dev/" class="external-link">r-universe</a>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @repo intrval https://psolymos.r-universe.dev</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/psolymos/intrval" class="external-link">intrval</a></span><span class="op">)</span></span></code></pre></div>
<p>Use the <code>@repos</code> tag to set CRAN-like repositories for all package installation:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @repos http://cran.r-project.org,https://psolymos.r-universe.dev</span></span></code></pre></div>
<p>Use the <code>@repos</code> tag to set an <a href="https://mran.microsoft.com/documents/rro/reproducibility" class="external-link">MRAN</a> checkpoint:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @repos https://mran.microsoft.com/snapshot/2020-01-01</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="versioned-packages">Versioned packages<a class="anchor" aria-label="anchor" href="#versioned-packages"></a>
</h4>
<p>When CRAN packages require specific a version, use the <code>@ver</code> tag according to the <a href="https://remotes.r-lib.org/reference/install_version.html" class="external-link"><code>remotes::install_version()</code></a> function specifications:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @ver mefa4 &gt;= 0.3-0</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/psolymos/mefa4" class="external-link">mefa4</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="r-version">R version<a class="anchor" aria-label="anchor" href="#r-version"></a>
</h4>
<p>R version declared using the <code>@rver</code> tag is recorded, but this information is not used during installation. The R version can be a major (<code>3</code>), a major-minor (<code>3.6</code>) or a major-minor-patch (<code>3.6.3</code>) version. When the version is partially specified, the highest minor/patch version will be used. Use dots as separators.</p>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The <code><a href="reference/create.html">create()</a></code> function will crawl the project directory for package dependencies. It will amend the dependency list and package sources based on the comments and query system requirements for the packages where those requirements are known for a particular platform. The summary is written into the <code>dependencies.json</code> file. Optionally, the system requirements are written into the <code>dependencies.json</code> file.</p>
<p><code><a href="reference/install.html">install()</a></code> will look for the <code>dependencies.json</code> file in the root of the project directory and perform dependency installation if the file exists. If the file does not exist, it uses <code><a href="reference/create.html">create()</a></code> to create that file before attempting installation.</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>See the <a href="./inst/examples/"><code>inst/examples</code></a> folder for examples.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p><a href="./LICENSE">MIT License</a> © 2022 Peter Solymos and Analythium Solutions Inc.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/analythium/deps/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/analythium/deps/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing deps</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Peter Solymos <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7337-1740" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Analythium Solutions Inc. <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Peter Solymos, Analythium Solutions Inc..</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
