[{"path":"https://hub.analythium.io/deps/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Peter Solymos. Author, maintainer. Analythium Solutions Inc.. Copyright holder, funder.","code":""},{"path":"https://hub.analythium.io/deps/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Solymos P (2024). deps: Dependency Management 'roxygen'-Style Comments. R package version 0.4.0, https://github.com/analythium/deps, https://hub.analythium.io/deps/.","code":"@Manual{,   title = {deps: Dependency Management with 'roxygen'-Style Comments},   author = {Peter Solymos},   year = {2024},   note = {R package version 0.4.0, https://github.com/analythium/deps},   url = {https://hub.analythium.io/deps/}, }"},{"path":"https://hub.analythium.io/deps/index.html","id":"deps","dir":"","previous_headings":"","what":"deps: Dependency Management with Code Decoration","title":"deps: Dependency Management with Code Decoration","text":"Dependency Management ‚Äòroxygen‚Äô-Style Comments Manage source code dependencies decorating existing R code special, ‚Äòroxygen‚Äô-style comments.","code":"#' @repo deps https://analythium.r-universe.dev install.packages(\"deps\", repos = \"https://analythium.r-universe.dev\")  #' @remote analythium/deps remotes::install_github(\"analythium/deps\")"},{"path":"https://hub.analythium.io/deps/index.html","id":"why-this-package","dir":"","previous_headings":"","what":"Why this package?","title":"deps: Dependency Management with Code Decoration","text":"many similar packages , aimed reproducibility (packrat, Require, switchr, versions, renv, capsule). Others focused dependency management (remotes, pak). need another one? Full reproducibility important heavyweight aspiration either needs locally cached package libraries, accurate snapshot mirroring local system (.e.¬†exactly package installed ). Full reproducibility often required reports, markdown based documents, scripts. loosely defined project combined strict versioning requirements, often erring side ‚Äúdependencies safer‚Äù. opposed , package-based development main use case dependency management oriented packages. case, exact versions managed extent avoiding breaking changes (given testing can surface ). package focused workflow combined ‚Äúbreaking changes‚Äù philosophy version requirements, leading leaner installation. wanted combine best approaches? loosely defined project just strict-enough versioning requirements ‚Äì without write DESCRIPTION file. need DESCRIPTION file package? Also, DESCRIPTION file won‚Äôt let pin exact package version specify alternate CRAN-like repositories‚Ä¶ answer deps: add comments code, deps rest. decorated code, can call deps::create() write dependencies.json file. Use deps::install() install dependencies based scanning project folder using existing dependencies.json file.","code":"#' @remote analythium/rconfig@CRAN-v0.1.3 rconfig::config()  #' @repo sf https://r-spatial.r-universe.dev library(sf)  #' @ver rgl 0.108.3 library(rgl)"},{"path":"https://hub.analythium.io/deps/index.html","id":"what-deps-does","dir":"","previous_headings":"","what":"What deps does","title":"deps: Dependency Management with Code Decoration","text":"Required packages found using renv::dependencies() function. System dependencies can specified well, actively sought . packages list found renv::dependencies() refined modified ‚Äòroxygen‚Äô-style comments. packages need declared/used somewhere source code comments take effect. comment provided given package, source assumed CRAN repository, version latest given repositories used time installation.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"tags","dir":"","previous_headings":"","what":"Tags","title":"deps: Dependency Management with Code Decoration","text":"Tags part ‚Äòroxygen‚Äô-style comments: #' followed space, tag starting @, space, parameters. deps implements following tags:","code":"#' @<tag> <parameter>"},{"path":"https://hub.analythium.io/deps/index.html","id":"system-requirements","dir":"","previous_headings":"Tags","what":"System requirements","title":"deps: Dependency Management with Code Decoration","text":"Known system requirements can declared using @sys tag, packages can separated commas: packages added list requirements non-development packages.","code":"#' @sys curl,git"},{"path":"https://hub.analythium.io/deps/index.html","id":"remote-sources","dir":"","previous_headings":"Tags","what":"Remote sources","title":"deps: Dependency Management with Code Decoration","text":"Remotely sourced packages declared using @remotetag following remotes specifications: effectively version pinning remotely sourced packages.","code":"#' @remote analythium/rconfig@CRAN-v0.1.3 rconfig::config()"},{"path":"https://hub.analythium.io/deps/index.html","id":"local-packages","dir":"","previous_headings":"Tags","what":"Local packages","title":"deps: Dependency Management with Code Decoration","text":"@local tag can used provide path local directory, compressed file (tar, zip, tar.gz, tar.bz2, tgz2, tbz) install packages : effectively :","code":"#' @local mypackage_0.1.0.tar.gz library(mypackage) #' @remote local::mypackage_0.1.0.tar.gz library(mypackage)"},{"path":"https://hub.analythium.io/deps/index.html","id":"development-packages","dir":"","previous_headings":"Tags","what":"Development packages","title":"deps: Dependency Management with Code Decoration","text":"Dev packages following @dev decorator excluded installation, removed already installed:","code":"#' @dev devtools,roxygen2 requireNamespace(\"devtools\")"},{"path":"https://hub.analythium.io/deps/index.html","id":"alternative-repos","dir":"","previous_headings":"Tags","what":"Alternative repos","title":"deps: Dependency Management with Code Decoration","text":"Use @repo tag specify alternative CRAN-like repository, e.g.¬†r-universe: Use @repos tag set CRAN-like repositories package installation:","code":"#' @repo intrval https://psolymos.r-universe.dev library(intrval) #' @repos http://cran.r-project.org,https://psolymos.r-universe.dev"},{"path":"https://hub.analythium.io/deps/index.html","id":"versioned-packages","dir":"","previous_headings":"Tags","what":"Versioned packages","title":"deps: Dependency Management with Code Decoration","text":"CRAN packages require specific version, use @ver tag according remotes::install_version() function specifications:","code":"#' @ver mefa4 >= 0.3-0 library(mefa4)"},{"path":"https://hub.analythium.io/deps/index.html","id":"r-version","dir":"","previous_headings":"Tags","what":"R version","title":"deps: Dependency Management with Code Decoration","text":"R version declared using @rver tag recorded, information used installation. R version can major (3), major-minor (3.6) major-minor-patch (3.6.3) version. version partially specified, highest minor/patch version used. Use dots separators.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"deps: Dependency Management with Code Decoration","text":"create() function crawl project directory package dependencies. amend dependency list package sources based comments. summary written dependencies.json file. Optionally, system requirements written dependencies.json file well. install() look dependencies.json file root project directory perform dependency installation file exists. file exist, uses create() create file attempting installation removes dependencies.json file afterwards, leaving trace.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"deps-cli","dir":"","previous_headings":"","what":"deps-cli","title":"deps: Dependency Management with Code Decoration","text":"CLI example given inst/examples/03-cli: Usage CLI explained deps-cli help: Analyze dependencies, install system R dependencies 1 line: deps-cli install looks following files attempting detect dependencies: renv.lock, pkg.lock, DESCRIPTION. Dockerfile can: can simply use ghcr.io/analythium/deps:latest parent image deps-cli already installed:","code":"cp inst/examples/03-cli/deps-cli.R /usr/local/bin/deps-cli chmod +x /usr/local/bin/deps-cli üöÄ Quickly install R package dependencies on the command line  üëâ MIT (c) Analythium Solutions Inc. 2022-2023           _                           _ _         __| | ___ _ __  ___        ___| (_)       / _` |/ _ \\ '_ \\/ __|_____ / __| | |      | (_| |  __/ |_) \\__ \\_____| (__| | |       \\__,_|\\___| .__/|___/      \\___|_|_|                 |_|                         üîó See https://github.com/analythium/deps  deps-cli is based on deps 0.1.2 2023-03-23   Usage: deps-cli <command> [options]  Commands:   deps-cli help         Print usage and exit   deps-cli version      Print version and exit   deps-cli create       Scan DIR and write dependencies.json   deps-cli sysreqs      Install system requirements   deps-cli install      Install R package dependencies   deps-cli all          create & sysreqs & install in one go  Options:   --dir DIR             Directory to scan, defaults to .   --upgrade             Upgrade package dependencies   --silent              Silent, no info printed  Examples:   deps-cli help   deps-cli version   deps-cli create   deps-cli create --silent   deps-cli sysreqs   deps-cli install --dir /root/app   deps-cli all --dir /root/app --upgrade deps all  # same as deps-cli create && deps-cli sysreqs && deps-cli install FROM rocker/r2u:24.04 RUN install.r remotes renv pak rconfig jsonlite yaml deps RUN installGithub.r analythium/deps RUN cp -p $(R RHOME)/site-library/deps/examples/03-cli/deps-cli.R /usr/local/bin/deps-cli RUN chmod +x /usr/local/bin/deps-cli  COPY ... # your files  RUN deps-cli all ... FROM ghcr.io/analythium/deps:latest ..."},{"path":"https://hub.analythium.io/deps/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"deps: Dependency Management with Code Decoration","text":"See inst/examples folder examples.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"notes","dir":"","previous_headings":"","what":"Notes","title":"deps: Dependency Management with Code Decoration","text":"deps package uses 5 minutes timeout downloads instead default 1 minute (getOption(\"timeout\")). timeout option R_DEFAULT_INTERNET_TIMEOUT environment variable set >5 minutes value, respected timeout set maximum three possible values. create() function prompts user asking confirmation writing dependencies.json file. Use create(ask = FALSE) bypass prompt.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"deps: Dependency Management with Code Decoration","text":"MIT License ¬© 2022-2023 Peter Solymos Analythium Solutions Inc.","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Dependencies JSON File ‚Äî create","title":"Create a Dependencies JSON File ‚Äî create","text":"Discover dependencies write dependencies.json file.","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Dependencies JSON File ‚Äî create","text":"","code":"create(   dir = getwd(),   file = \"dependencies.json\",   output = dir,   installed = c(\"base\", \"recommended\"),   overwrite = TRUE,   ask = TRUE )"},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Dependencies JSON File ‚Äî create","text":"dir Path directory files scanned located. file name file save, default \"dependencies.json\". output Path directory JSON file written . installed priority argument installed.packages() packages excluded. overwrite Logical, file output directory overwritten exists? ask Logical, asking confirmation writing dependencies.json file.","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Dependencies JSON File ‚Äî create","text":"Invisibly returns list file names created. side effect JSON (possibly text system requirements) file written hard drive. function fails R related files dir.","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Dependencies JSON File ‚Äî create","text":"","code":"dir <- system.file(\"examples/01-basic\", package = \"deps\") out <- tempdir() create(dir, output = out, ask = interactive()) cat(readLines(file.path(out, \"dependencies.json\")), sep = \"\\n\") #> { #>   \"version\": \"1.0\", #>   \"rver\": \"4.4.1\", #>   \"repos\": [\"https://psolymos.r-universe.dev\", \"https://r-spatial.r-universe.dev\"], #>   \"sysreqs\": [\"curl\", \"git\"], #>   \"packages\": [ #>     { #>       \"package\": \"devtools\", #>       \"installed\": false, #>       \"dev\": true #>     }, #>     { #>       \"package\": \"intrval\", #>       \"installed\": false, #>       \"dev\": false, #>       \"repo\": \"https://psolymos.r-universe.dev\", #>       \"source\": \"repo\" #>     }, #>     { #>       \"package\": \"MASS\", #>       \"installed\": true, #>       \"dev\": false #>     }, #>     { #>       \"package\": \"mefa4\", #>       \"installed\": false, #>       \"dev\": false, #>       \"ver\": \">= 0.3-0\", #>       \"source\": \"ver\" #>     }, #>     { #>       \"package\": \"rconfig\", #>       \"installed\": false, #>       \"dev\": false, #>       \"remote\": \"analythium/rconfig@CRAN-v0.1.3\", #>       \"source\": \"remote\" #>     } #>   ] #> } unlink(file.path(out, \"dependencies.json\"))"},{"path":"https://hub.analythium.io/deps/reference/deps-package.html","id":null,"dir":"Reference","previous_headings":"","what":"deps: Dependency Management with 'roxygen'-Style Comments ‚Äî deps-package","title":"deps: Dependency Management with 'roxygen'-Style Comments ‚Äî deps-package","text":"Manage source code dependencies decorating existing R code special, 'roxygen'-style comments.","code":""},{"path":[]},{"path":"https://hub.analythium.io/deps/reference/deps-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"deps: Dependency Management with 'roxygen'-Style Comments ‚Äî deps-package","text":"Maintainer: Peter Solymos peter@analythium.io (ORCID) contributors: Analythium Solutions Inc. [copyright holder, funder]","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":null,"dir":"Reference","previous_headings":"","what":"Install Dependencies ‚Äî install","title":"Install Dependencies ‚Äî install","text":"Install dependencies existing dependencies.json file discovering dependencies.","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Install Dependencies ‚Äî install","text":"","code":"install(   dir = getwd(),   file = \"dependencies.json\",   upgrade = \"never\",   cleanup = TRUE,   timeout = 300L,   ask = TRUE,   ... )"},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Install Dependencies ‚Äî install","text":"dir Path directory JSON file written . file name file save, default \"dependencies.json\". file found dir, create() called. upgrade package dependencies upgraded? Argument passed remotes functions. cleanup Logical, clean files created create() file exist. timeout Integer, timeout file downloads (default 60 seconds can short). ask Logical, asking confirmation writing dependencies.json file. ... argument passed remotes functions.","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Install Dependencies ‚Äî install","text":"Returns NULL invisibly. side effect dependencies installed.","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Install Dependencies ‚Äî install","text":"","code":"dir <- system.file(\"examples/01-basic\", package = \"deps\") out <- tempdir() create(dir, output = out, ask = interactive()) cat(readLines(file.path(out, \"dependencies.json\")), sep = \"\\n\") #> { #>   \"version\": \"1.0\", #>   \"rver\": \"4.4.1\", #>   \"repos\": [\"https://psolymos.r-universe.dev\", \"https://r-spatial.r-universe.dev\"], #>   \"sysreqs\": [\"curl\", \"git\"], #>   \"packages\": [ #>     { #>       \"package\": \"MASS\", #>       \"installed\": true, #>       \"dev\": false #>     }, #>     { #>       \"package\": \"devtools\", #>       \"installed\": false, #>       \"dev\": true #>     }, #>     { #>       \"package\": \"intrval\", #>       \"installed\": false, #>       \"dev\": false, #>       \"repo\": \"https://psolymos.r-universe.dev\", #>       \"source\": \"repo\" #>     }, #>     { #>       \"package\": \"mefa4\", #>       \"installed\": false, #>       \"dev\": false, #>       \"ver\": \">= 0.3-0\", #>       \"source\": \"ver\" #>     }, #>     { #>       \"package\": \"rconfig\", #>       \"installed\": false, #>       \"dev\": false, #>       \"remote\": \"analythium/rconfig@CRAN-v0.1.3\", #>       \"source\": \"remote\" #>     } #>   ] #> } if (FALSE) { install(out) } unlink(file.path(out, \"dependencies.json\"))"},{"path":"https://hub.analythium.io/deps/news/index.html","id":"version-040","dir":"Changelog","previous_headings":"","what":"Version 0.4.0","title":"Version 0.4.0","text":"R versions updated new release 4.4.1. Imports rmarkdown renv can crawl Rmd files. Support Quarto (qmd) files.","code":""},{"path":"https://hub.analythium.io/deps/news/index.html","id":"version-030","dir":"Changelog","previous_headings":"","what":"Version 0.3.0","title":"Version 0.3.0","text":"CRAN release: 2024-05-21 sysreqs function removed due archival sysreqs database relied . R versions updated new releases.","code":""},{"path":"https://hub.analythium.io/deps/news/index.html","id":"version-020","dir":"Changelog","previous_headings":"","what":"Version 0.2.0","title":"Version 0.2.0","text":"CRAN release: 2023-06-27 Several small fixes make functionality robust missing files. Updates command line example lacked closing parenthesis failed.","code":""},{"path":"https://hub.analythium.io/deps/news/index.html","id":"version-012","dir":"Changelog","previous_headings":"","what":"Version 0.1.2","title":"Version 0.1.2","text":"CRAN release: 2023-03-24 Capitalized word Style package title. Revised examples use dontrun{} minimally possible, similarly install.packages() example. create() now asks permission write dependencies.json default.","code":""},{"path":"https://hub.analythium.io/deps/news/index.html","id":"version-011","dir":"Changelog","previous_headings":"","what":"Version 0.1.1","title":"Version 0.1.1","text":"Single quoting possibly misspelled word ‚Äòroxygen‚Äô DESCRIPTION per CRAN request. Removing unnecessary suggested package rmarkdown.","code":""},{"path":"https://hub.analythium.io/deps/news/index.html","id":"version-010","dir":"Changelog","previous_headings":"","what":"Version 0.1.0","title":"Version 0.1.0","text":"First CRAN submission.","code":""}]
