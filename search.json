[{"path":"https://hub.analythium.io/deps/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Peter Solymos. Author, maintainer. Analythium Solutions Inc.. Copyright holder, funder.","code":""},{"path":"https://hub.analythium.io/deps/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Solymos P (2022). deps: Dependency Management roxygen-style Comments. R package version 0.0.2, https://github.com/analythium/deps.","code":"@Manual{,   title = {deps: Dependency Management with roxygen-style Comments},   author = {Peter Solymos},   year = {2022},   note = {R package version 0.0.2},   url = {https://github.com/analythium/deps}, }"},{"path":"https://hub.analythium.io/deps/index.html","id":"deps","dir":"","previous_headings":"","what":"deps: Dependency Management with Code Decoration","title":"deps: Dependency Management with Code Decoration","text":"Dependency Management roxygen-style Comments Manage source code dependencies decorating existing R code special, roxygen-style comments.","code":"#' @repo deps https://analythium.r-universe.dev install.packages(\"deps\", repos = \"https://analythium.r-universe.dev\")  #' @remote analythium/deps remotes::install_github(\"analythium/deps\")"},{"path":"https://hub.analythium.io/deps/index.html","id":"why-this-package","dir":"","previous_headings":"","what":"Why this package?","title":"deps: Dependency Management with Code Decoration","text":"many similar packages , aimed reproducibility (packrat, Require, switchr, versions, renv, capsule). Others focused dependency management (remotes, pak). need another one? Full reproducibility important heavyweight aspiration either needs locally cached package libraries, accurate snapshot mirroring local system (.e. exactly package installed ). Full reproducibility often required reports, markdown based documents, scripts. loosely defined project combined strict versioning requirements, often erring side “dependencies safer”. opposed , package-based development main use case dependency management oriented packages. case, exact versions managed extent avoiding breaking changes (given testing can surface ). package focused workflow combined “breaking changes” philosophy version requirements, leading leaner installation. wanted combine best approaches? loosely defined project just strict-enough versioning requirements – without write DESCRIPTION file. need DESCRIPTION file package? Also, DESCRIPTION file won’t let pin exact package version specify alternate CRAN-like repositories… answer deps: add comments code, deps rest. decorated code, can call deps::create() write dependencies.json file. Use deps::install() install dependencies based scanning project folder using existing dependencies.json file.","code":"#' @remote analythium/rconfig@CRAN-v0.1.3 rconfig::config()  #' @repo sf https://r-spatial.r-universe.dev library(sf)  #' @ver rgl 0.108.3 library(rgl)"},{"path":"https://hub.analythium.io/deps/index.html","id":"what-deps-does","dir":"","previous_headings":"","what":"What deps does","title":"deps: Dependency Management with Code Decoration","text":"Required packages found using renv::dependencies() function. System dependencies based sysreqs.r-hub.io. packages list found renv::dependencies() refined modified roxygen-style comments. packages need declared/used somewhere source code comments take effect. comment provided given package, source assumed CRAN repository, version latest given repositories used time installation.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"tags","dir":"","previous_headings":"","what":"Tags","title":"deps: Dependency Management with Code Decoration","text":"Tags part roxygen-style comments: #' followed space, tag starting @, space, parameters. deps implements following tags:","code":"#' @<tag> <parameter>"},{"path":"https://hub.analythium.io/deps/index.html","id":"system-requirements","dir":"","previous_headings":"Tags","what":"System requirements","title":"deps: Dependency Management with Code Decoration","text":"Known system requirements can declared using @sys tag, packages can separated commas: packages added list requirements identified sysreqs.r-hub.io database non-development packages.","code":"#' @sys curl,git"},{"path":"https://hub.analythium.io/deps/index.html","id":"remote-sources","dir":"","previous_headings":"Tags","what":"Remote sources","title":"deps: Dependency Management with Code Decoration","text":"Remotely sourced packages declared using @remotetag following remotes specifications: effectively version pinning remotely sourced packages.","code":"#' @remote analythium/rconfig@CRAN-v0.1.3 rconfig::config()"},{"path":"https://hub.analythium.io/deps/index.html","id":"local-packages","dir":"","previous_headings":"Tags","what":"Local packages","title":"deps: Dependency Management with Code Decoration","text":"@local tag can used provide path local directory, compressed file (tar, zip, tar.gz, tar.bz2, tgz2, tbz) install packages : effectively :","code":"#' @local mypackage_0.1.0.tar.gz library(mypackage) #' @remote local::mypackage_0.1.0.tar.gz library(mypackage)"},{"path":"https://hub.analythium.io/deps/index.html","id":"development-packages","dir":"","previous_headings":"Tags","what":"Development packages","title":"deps: Dependency Management with Code Decoration","text":"Dev packages following @dev decorator excluded installation, removed already installed:","code":"#' @dev devtools,roxygen2 requireNamespace(\"devtools\")"},{"path":"https://hub.analythium.io/deps/index.html","id":"alternative-repos","dir":"","previous_headings":"Tags","what":"Alternative repos","title":"deps: Dependency Management with Code Decoration","text":"Use @repo tag specify alternative CRAN-like repository, e.g. r-universe: Use @repos tag set CRAN-like repositories package installation: Use @repos tag set MRAN checkpoint:","code":"#' @repo intrval https://psolymos.r-universe.dev library(intrval) #' @repos http://cran.r-project.org,https://psolymos.r-universe.dev #' @repos https://mran.microsoft.com/snapshot/2020-01-01"},{"path":"https://hub.analythium.io/deps/index.html","id":"versioned-packages","dir":"","previous_headings":"Tags","what":"Versioned packages","title":"deps: Dependency Management with Code Decoration","text":"CRAN packages require specific version, use @ver tag according remotes::install_version() function specifications:","code":"#' @ver mefa4 >= 0.3-0 library(mefa4)"},{"path":"https://hub.analythium.io/deps/index.html","id":"r-version","dir":"","previous_headings":"Tags","what":"R version","title":"deps: Dependency Management with Code Decoration","text":"R version declared using @rver tag recorded, information used installation. R version can major (3), major-minor (3.6) major-minor-patch (3.6.3) version. version partially specified, highest minor/patch version used. Use dots separators.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"deps: Dependency Management with Code Decoration","text":"create() function crawl project directory package dependencies. amend dependency list package sources based comments query system requirements packages requirements known particular platform. summary written dependencies.json file. Optionally, system requirements written dependencies.json file. install() look dependencies.json file root project directory perform dependency installation file exists. file exist, uses create() create file attempting installation.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"deps: Dependency Management with Code Decoration","text":"See inst/examples folder examples.","code":""},{"path":"https://hub.analythium.io/deps/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"deps: Dependency Management with Code Decoration","text":"MIT License © 2022 Peter Solymos Analythium Solutions Inc.","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Dependencies JSON File — create","title":"Create a Dependencies JSON File — create","text":"Create Dependencies JSON File","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Dependencies JSON File — create","text":"","code":"create(   dir = getwd(),   file = \"dependencies.json\",   output = dir,   platform = \"DEB\",   installed = c(\"base\", \"recommended\"),   overwrite = TRUE )"},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Dependencies JSON File — create","text":"dir Path directory files scanned located. file name file save, default \"dependencies.json\". output Path directory JSON file written . platform platform supplied sysreqs(). Can NULL NA case system requirements returned. installed priority argument installed.packages() packages excluded. overwrite Logical, file output directory overwritten exists?","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Dependencies JSON File — create","text":"Invisibly returns list file names created. side effect JSON (possibly text system requirements) file written hard drive. function fails R related files dir.","code":""},{"path":"https://hub.analythium.io/deps/reference/create.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Dependencies JSON File — create","text":"","code":"dir <- system.file(\"examples/01-basic\", package = \"deps\") out <- tempdir() create(dir, output = out) cat(readLines(file.path(out, \"dependencies.json\")), sep = \"\\n\") #> { #>   \"version\": \"1.0\", #>   \"rver\": \"4.2.1\", #>   \"repos\": [\"https://psolymos.r-universe.dev\", \"https://r-spatial.r-universe.dev\"], #>   \"sysreqs\": [\"curl\", \"git\"], #>   \"packages\": [ #>     { #>       \"package\": \"devtools\", #>       \"installed\": false, #>       \"dev\": true #>     }, #>     { #>       \"package\": \"intrval\", #>       \"installed\": false, #>       \"dev\": false, #>       \"repo\": \"https://psolymos.r-universe.dev\", #>       \"source\": \"repo\" #>     }, #>     { #>       \"package\": \"MASS\", #>       \"installed\": true, #>       \"dev\": false #>     }, #>     { #>       \"package\": \"mefa4\", #>       \"installed\": false, #>       \"dev\": false, #>       \"ver\": \">= 0.3-0\", #>       \"source\": \"ver\" #>     }, #>     { #>       \"package\": \"rconfig\", #>       \"installed\": false, #>       \"dev\": false, #>       \"remote\": \"analythium/rconfig@CRAN-v0.1.3\", #>       \"source\": \"remote\" #>     } #>   ] #> } unlink(file.path(out, \"dependencies.json\"))"},{"path":"https://hub.analythium.io/deps/reference/deps-package.html","id":null,"dir":"Reference","previous_headings":"","what":"deps: Dependency Management with roxygen-style Comments — deps-package","title":"deps: Dependency Management with roxygen-style Comments — deps-package","text":"Manage source code dependencies decorating existing R code special, roxygen-style comments.","code":""},{"path":[]},{"path":"https://hub.analythium.io/deps/reference/deps-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"deps: Dependency Management with roxygen-style Comments — deps-package","text":"Maintainer: Peter Solymos peter@analythium.io (ORCID) contributors: Analythium Solutions Inc. [copyright holder, funder]","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Dependencies JSON File — install","title":"Create a Dependencies JSON File — install","text":"Create Dependencies JSON File","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Dependencies JSON File — install","text":"","code":"install(   dir = getwd(),   file = \"dependencies.json\",   upgrade = \"never\",   cleanup = TRUE,   timeout = 300L,   ... )"},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Dependencies JSON File — install","text":"dir Path directory JSON file written . file name file save, default \"dependencies.json\". file found dir, create() called. upgrade package dependencies upgraded? Argument passed remotes functions. cleanup Logical, clean files created create() file exist. timeout Integer, timeout file downloads (default 60 seconds can short). ... argument passed remotes functions.","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Dependencies JSON File — install","text":"Returns NULL invisibly. side effect dependencies installed.","code":""},{"path":"https://hub.analythium.io/deps/reference/install.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a Dependencies JSON File — install","text":"","code":"if (FALSE) { dir <- system.file(\"examples/01-basic\", package = \"deps\") out <- tempdir() create(dir, output = out) install(out) unlink(file.path(out, \"dependencies.json\")) }"},{"path":"https://hub.analythium.io/deps/news/index.html","id":"version-001","dir":"Changelog","previous_headings":"","what":"Version 0.0.1","title":"Version 0.0.1","text":"Experimental.","code":""}]
